<mat-card>
  <mat-card-header>
    <mat-card-title>Új könyv hozzáadása</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
      <mat-form-field appearance="outline">
        <mat-label>Cím</mat-label>
        <input matInput formControlName="title" required>
        <mat-error *ngIf="title?.hasError('required')">Kötelező mező</mat-error>
        <mat-error *ngIf="title?.hasError('maxlength')">Maximum 100 karakter</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Szerző</mat-label>
        <input matInput formControlName="author" required>
        <mat-error *ngIf="author?.hasError('required')">Kötelező mező</mat-error>
        <mat-error *ngIf="author?.hasError('maxlength')">Maximum 50 karakter</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Kategória</mat-label>
        <input matInput formControlName="category" required>
        <mat-error *ngIf="category?.hasError('required')">Kötelező mező</mat-error>
        <mat-error *ngIf="category?.hasError('maxlength')">Maximum 30 karakter</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Megjelenés éve</mat-label>
        <input matInput type="number" formControlName="year" required>
        <mat-error *ngIf="year?.hasError('required')">Kötelező mező</mat-error>
        <mat-error *ngIf="year?.hasError('min')">Minimum 1800</mat-error>
        <mat-error *ngIf="year?.hasError('max')">Maximum {{currentYear}}</mat-error>
      </mat-form-field>

      <div class="form-actions">
        <button 
          mat-raised-button 
          color="primary" 
          type="submit"
          [disabled]="bookForm.invalid || isSubmitting"
        >
          <span *ngIf="!isSubmitting">Mentés</span>
          <mat-spinner *ngIf="isSubmitting" diameter="20"></mat-spinner>
        </button>
        <button 
          mat-button 
          type="button" 
          (click)="navigateToList()"
        >
          Mégse
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>